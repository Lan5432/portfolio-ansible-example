upstream python {
    server {{ python_app_ip }}:{{ python_app_port }};
}

upstream golang {
    server {{ golang_app_ip }}:{{ golang_app_port }};
}

server {
    listen 80;
    server_name {{ python_app_domain }};

    location /python {
        include uwsgi_params;
        uwsgi_pass python;
    }

    access_log /var/log/nginx/{{ python_app_domain }}.log;
    error_log /var/log/nginx/{{ python_app_domain }}-error.log error;
}

server {
    listen 80;
    server_name {{ golang_app_domain }};

    location /golang {
        proxy_pass golang;
    }
}
